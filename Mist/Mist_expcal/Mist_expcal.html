<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>经验/COST计算器</title>
    <style>
        body {
            background : #555;
        }
        .a {
            text-decoration:none;
            color:#FAFAFA;
        }
        .a:visited {
            color:#FAFAFA;
        }
        .titlebox {
            width: 900px;
            height: 82px;
            margin: auto;
            padding: 5px 10px 5px 10px;
            background-color:#81BEF7;
        }
        .titleboxleft {
            width: 700px;
            float:left;
        }
        .titleboxright {
            width: 200px;
            float:left;
        }
        .inputslider {
            width: 300px;
            height: 22px;
            vertical-align: middle;
        }
        .explabel {
            height: 22px;
            font-size: 16px;
            vertical-align: middle;
        }
        .explabel2 {
            margin-right: 10px;
        }
        .content {
            width: 900px;
            height : auto ;
            margin: auto;
            background: white;
            padding: 10px;
            font-size :18px;
            line-height :200%;
            float: none;
            clear: both;
            overflow:auto;
            background-color:#F5F4F3;
        }
        .calbox {
            width: 428px;
            margin: 5px;
            padding: 5px;
            height: auto;
            float: left;
            border: solid;
            border-width: 1px;
            border-color: #AAA;
            border-radius:5px;
        }
        .calboxfull {
            width: 878px;
        }
        .returnbtn {
            height: 42px;
            width: 200px;
            display: inline-block;
            background-color: #f4511e;
            border: none;
            color: #FFFFFF;
            text-align: center;
            font-size: 28px;
            padding: 20px;
            transition: all 0.5s;
            cursor: pointer;
        }
        .button {
            background-color: #555;
            width: 100%;
            color: white;
            padding: 10px 0px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            border-bottom: 1px solid #111;
            cursor: pointer;
            -webkit-transition-duration: 0.2s;
            transition-duration: 0.2s;
        }
        .button:hover {
            background-color: #1CA050;
            color: white;
        }
        .h1 {
            font-size:32px;
            text-align:left; 
            color:#FAFAFA;
        }
        .h1_right {
            text-align:right; 
        }
        .select1 {
            width: 80px;
        }
        .select2 {
            width: 60px;
        }
    </style>
</head>
<body>
    <div class="titlebox">
        <div class="titleboxleft">
            <h1 class="h1">经验/COST计算器</h1>
        </div>
        <div class="titleboxright">
            <h1 class="h1 h1_right"><a class="a" href="../../index.html">返回首页</a></h1>
        </div>
    </div>
    <div class="content">
        <div class="calbox">
            <div>
                <label id="title1">舰船经验</label>
                <br>
                <label class="explabel">起始等级:</label>
                <input id="TBox_ShipEXP_V1" type="range" step="1" min="1" max="80" class="inputslider" oninput="changelabel('TBox_ShipEXP_V1','lbl_ShipEXP_V1')"/>
                <label id="lbl_ShipEXP_V1" class="explabel"></label>
                <br>
                <label class="explabel">目标等级:</label>
                <input id="TBox_ShipEXP_V2" type="range" step="1" min="1" max="80" class="inputslider" oninput="changelabel('TBox_ShipEXP_V2','lbl_ShipEXP_V2')"/>    
                <label id="lbl_ShipEXP_V2" class="explabel"></label>
                <br>
                <label class="explabel">选择海域:</label>
                <select id="CMB_map_type_ship" class="select1" onchange="CMB_map_changed('CMB_map_type_ship','CMB_map_ship','lbl_map_data_ship')"></select>
                <select id="CMB_map_ship" class="select2" onchange="CMB_map_changed('CMB_map_type_ship','CMB_map_ship','lbl_map_data_ship')"></select>
                <label class="explabel explabel2" id="lbl_map_data_ship"></label>
                <br>
            </div>
            <div style="float:left; width:145px;">
                <label class="explabel explabel2">需要经验:</label><label class="explabel explabel2" id="lbl_ShipEXP_needed"></label>
            </div>
            <div style="float:left; width:135px;">
                <label class="explabel explabel2">需要场次:</label><label class="explabel explabel2" id="lbl_ShipRounds_needed"></label>
            </div>
            <div style="float:left; width:148px;">
                <label class="explabel explabel2">需要电力:</label><label class="explabel explabel2" id="lbl_ShipMuons_needed"></label>
            </div>
            <button class="button" onclick="calculate('ship')">开始计算</button> 
        </div>
        <div class="calbox">
            <div>
                <label id="title1">提督经验</label>
                <br>
                <label class="explabel">起始等级:</label>
                <input id="TBox_CommEXP_V1" type="range" step="1" min="1" max="150" class="inputslider" oninput="changelabel('TBox_CommEXP_V1','lbl_CommEXP_V1')"/>
                <label id="lbl_CommEXP_V1" class="explabel"></label>
                <br>
                <label class="explabel">目标等级:</label>
                <input id="TBox_CommEXP_V2" type="range" step="1" min="1" max="150" class="inputslider" oninput="changelabel('TBox_CommEXP_V2','lbl_CommEXP_V2')"/>    
                <label id="lbl_CommEXP_V2" class="explabel"></label>
                <br>
                <label class="explabel">选择海域:</label>
                <select id="CMB_map_type_comm" class="select1" onchange="CMB_map_changed('CMB_map_type_comm','CMB_map_comm','lbl_map_data_comm')"></select>
                <select id="CMB_map_comm" class="select2" onchange="CMB_map_changed('CMB_map_type_comm','CMB_map_comm','lbl_map_data_comm')"></select>
                <label class="explabel explabel2" id="lbl_map_data_comm"></label>
                <br>
            </div>
            <div style="float:left; width:145px;">
                <label class="explabel ">需要经验:</label><label class="explabel explabel2" id="lbl_CommEXP_needed"></label>
            </div>
            <div style="float:left; width:135px;">
                <label class="explabel explabel2">需要场次:</label><label class="explabel explabel2" id="lbl_CommRounds_needed"></label>
            </div>
            <div style="float:left; width:148px;">
                <label class="explabel explabel2">需要电力:</label><label class="explabel explabel2" id="lbl_CommMuons_needed"></label>
            </div>
            <button class="button"  style="width:100%" onclick="calculate('commander')">开始计算</button> 
        </div>
        <hr style="clear:both" noshade="noshade"/>
        <div class="calbox">
            <div>
                <label id="title1">提督等级相关</label>
            </div>
            <div>
                <label class="explabel">提督等级:</label>
                <input id="TBox_CommLevel" type="range" step="1" min="1" max="150" class="inputslider" oninput="changelabel('TBox_CommLevel','lbl_CommLevel');calcommander(this.value,'lbl_CommData');"/>
                <label id="lbl_CommLevel" class="explabel explabel2"></label>
            </div>
            <div>
                <label class="explabel explabel2" id="lbl_CommData"></label>
            </div>
        </div>
    </div>
        <script type="text/javascript">
        var Dict_shipexp_accumulated = [
        //  x1		x2		x3		x4		x5		x6		x7		x8		x9		x10
            0,		10,		28,		55,		91,		135,	187,	248,	318,	396,
            482,	611,	783,	997,	1253,	1552,	1894,	2278,	2704,	3173,
            3685,	4281,	4963,	5729,	6581,	7517,	8539,	9645,	10837,	12113,
            13475,	14964,	16580,	18324,	20196,	22195,	24321,	26575,	28957,	31466,
            34102,	36909,	39885,	43032,	46348,	49835,	53491,	57318,	61314,	65481,
            69817,	74579,	79765,	85377,	91413,	97875,	104761,	112073,	119809,	127971,
            136557,	145994,	156280,	167417,	179403,	192240,	205926,	220463,	235849,	252086,
            270022,	289659,	310995,	334032,	358768,	385205,	413341,	443178,	474714,	507951,
        ];
        var Dict_commexp_accumulated = [
        //  x1		x2		x3		x4		x5		x6		x7		x8		x9		x10
            0,		10,		30,		60,		100,	150,	210,	280,	360,	450,
            550,	670,	810,	970,	1150,	1350,	1570,	1810,	2070,	2350,
            2650,	2980,	3340,	3730,	4150,	4600,	5080,	5590,	6130,	6700,
            7300,	7940,	8620,	9340,	10100,	10900,	11740,	12620,	13540,	14500,
            15500,	16550,	17650,	18800,	20000,	21250,	22550,	23900,	25300,	26750,
            28250,	29810,	31430,	33110,	34850,	36650,	38510,	40430,	42410,	44450,
            46550,	48720,	50960,	53270,	55650,	58100,	60620,	63210,	65870,	68600,
            71400,	74280,	77240,	80280,	83400,	86600,	89880,	93240,	96680,	100200,
            103800,	107490,	111270,	115140,	119100,	123150,	127290,	131520,	135840,	140250,
            144750,	149350,	154050,	158850,	163750,	168750,	173850,	179050,	184350,	189750,
            195250,	200850,	206550,	212350,	218250,	224250,	230350,	236550,	242850,	249250,
            255750,	262350,	269050,	275850,	282750,	289750,	296850,	304050,	311350,	318750,
            326250,	333850,	341550,	349350,	357250,	365250,	373350,	381550,	389850,	398250,
            406750,	415350,	424050,	432850,	441750,	450750,	459850,	469050,	478350,	487750,
            497250,	506850,	516550,	526350,	536250,	546250,	556350,	566550,	576850,	587250,
        ];
        //
        var Dict_map_data = [
            [   //normal 经验:Dict_map_data[0][x][1]  电力Dict_map_data[0][x][2]
                //[ 电力 , 经验 ]
                //x1            x2            x3            x4
                [ 8 , 12 ],   [ 8 , 12 ],   [ 8 , 13 ],   [ 10 , 18 ], //1-1 ~ 1-4
                [ 12 , 24 ],  [ 12 , 26 ],  [ 12 , 28 ],  [ 14 , 39 ], //2-1 ~ 2-4
                [ 16 , 48 ],  [ 16 , 51 ],  [ 16 , 54 ],  [ 18 , 68 ], //3-1 ~ 3-4
                [ 20 , 80 ],  [ 20 , 84 ],  [ 20 , 88 ],  [ 22 , 105 ], //4-1 ~ 4-4
                [ 22 , 110 ], [ 22 , 114 ], [ 22 , 118 ], [ 23 , 133 ], //5-1 ~ 5-4
                [ 24 , 144 ], [ 24 , 148 ], [ 24 , 153 ], [ 26 , 176 ], //6-1 ~ 6-4
            ],
            [   //hard 经验:Dict_map_data[1][x][1]  电力Dict_map_data[1][x][2]
                //[ 电力 , 经验 ]
                //x1            x2            x3            x4
                [ 12 , 21 ],  [ 12 , 23 ],  [ 12 , 24 ],  [ 14 , 30 ], //1-1 ~ 1-4
                [ 16 , 38 ],  [ 16 , 42 ],  [ 16 , 46 ],  [ 18 , 60 ], //2-1 ~ 2-4
                [ 20 , 72 ],  [ 20 , 76 ],  [ 20 , 81 ],  [ 22 , 100 ], //3-1 ~ 3-4
                [ 24 , 115 ], [ 24 , 120 ], [ 24 , 126 ], [ 26 , 149 ], //4-1 ~ 4-4
                [ 26 , 156 ], [ 26 , 162 ], [ 26 , 168 ], [ 27 , 187 ], //5-1 ~ 5-4
                [ 28 , 201 ], [ 28 , 208 ], [ 28 , 215 ], [ 30 , 244 ], //6-1 ~ 6-4
            ]
        ];
        var Dict_map_type = [ "Normal" , "Hard" ];
        var Dict_map_name = [
            "1-1","1-2","1-3","1-4",
            "2-1","2-2","2-3","2-4",
            "3-1","3-2","3-3","3-4",
            "4-1","4-2","4-3","4-4",
            "5-1","5-2","5-3","5-4",
            "6-1","6-2","6-3","6-4",
        ];
        var Dict_Commander_Cost = [ //只到100
            //  x1		x2		x3		x4		x5		x6		x7		x8		x9		x10
                47,		48,		49,		50,		51,		52,		53,		54,		55,		57,
                58,		59,		60,		61,		62,		63,		64,		65,		66,		68,
                69,		69,		70,		71,		71,		72,		73,		73,		74,		76,
                76,		77,		78,		78,		79,		80,		80,		81,		82,		82,
                83,		84,		84,		85,		86,		86,		87,		88,		88,		89,
                89,		90,		90,		91,		91,		92,		92,		93,		93,		94,
                94,		95,		95,		96,		96,		97,		97,		98,		98,		99,
                99,		99,		99,		99,		100,	100,	100,	100,	100,	101,
                101,	101,	101,	101,	102,	102,	102,	102,	102,	103,
                103,	103,	103,	103,	104,	104,	104,	104,	104,	105
        ];
        //初始化开始
        for (var i=0;i<Dict_map_type.length;i++){ //加载海域下拉框 normal/hard
            var getData = Dict_map_type[i];
            document.getElementById("CMB_map_type_ship").options.add(new Option(getData,i));
            document.getElementById("CMB_map_type_comm").options.add(new Option(getData,i));
        };
        for (var i=0;i<Dict_map_name.length;i++){ //加载海域下拉框 海域编号
            var getData = Dict_map_name[i];
            document.getElementById("CMB_map_ship").options.add(new Option(getData,i));
            document.getElementById("CMB_map_comm").options.add(new Option(getData,i));
        };
        document.getElementById("TBox_ShipEXP_V1").value = "1";
        document.getElementById("TBox_ShipEXP_V2").value = "2";
        document.getElementById("TBox_CommEXP_V1").value = "1";
        document.getElementById("TBox_CommEXP_V2").value = "2";
        document.getElementById("TBox_CommLevel").value = "1";
        changelabel("TBox_ShipEXP_V1","lbl_ShipEXP_V1");
        changelabel("TBox_ShipEXP_V2","lbl_ShipEXP_V2");
        changelabel("TBox_CommEXP_V1","lbl_CommEXP_V1");
        changelabel("TBox_CommEXP_V2","lbl_CommEXP_V2");
        changelabel("TBox_CommLevel","lbl_CommLevel");
        CMB_map_changed('CMB_map_type_ship','CMB_map_ship','lbl_map_data_ship');
        CMB_map_changed('CMB_map_type_comm','CMB_map_comm','lbl_map_data_comm');
        calcommander(document.getElementById("TBox_CommLevel").value,'lbl_CommData');
        //初始化完成
        //
        function changelabel(tboxid,lblid){ //滑动条数字显示绑定
            document.getElementById(lblid).innerText = document.getElementById(tboxid).value;
        };
        function mapdata(selectbox1,selectbox2) { //获取地图数据(经验,电力)
            var i = document.getElementById(selectbox1).selectedIndex;
            var j = document.getElementById(selectbox2).selectedIndex;
            this.muon = Dict_map_data[i][j][0];
            this.exp = Dict_map_data[i][j][1];
        };
        function CMB_map_changed(selectbox1,selectbox2,lblid) { //海域下拉框变动后显示文字
            mymapdata =new mapdata(selectbox1,selectbox2);
            document.getElementById(lblid).innerText = "消耗电力:" + mymapdata.muon + "点" + "  经验:" + mymapdata.exp + "点" ;
        };
        function calculate(type) { 
            switch (type)
            {
                case 'ship':
                    mymapdata = new mapdata('CMB_map_type_ship','CMB_map_ship'); //获取地图数据
                    var exp_needed = calexp('TBox_ShipEXP_V1','TBox_ShipEXP_V2',Dict_shipexp_accumulated); //计算需要多少经验
                    var rounds = calrounds(exp_needed,mymapdata.exp); //计算需要多少场次
                    var muons = calmuons(rounds,mymapdata.muon);
                    document.getElementById('lbl_ShipEXP_needed').innerText = exp_needed;
                    document.getElementById('lbl_ShipRounds_needed').innerText = rounds;
                    document.getElementById('lbl_ShipMuons_needed').innerText = muons;
                    break;
                case 'commander': 
                    mymapdata = new mapdata('CMB_map_type_comm','CMB_map_comm'); //获取地图数据
                    var exp_needed = calexp('TBox_CommEXP_V1','TBox_CommEXP_V2',Dict_commexp_accumulated); //计算需要多少经验
                    var rounds = calrounds(exp_needed,mymapdata.muon); //计算需要多少场次(提督经验与muon消耗比为1:1)
                    var muons = calmuons(rounds,mymapdata.muon);
                    document.getElementById('lbl_CommEXP_needed').innerText = exp_needed;
                    document.getElementById('lbl_CommRounds_needed').innerText = rounds;
                    document.getElementById('lbl_CommMuons_needed').innerText = muons;
                    break;
            }
        }
        function calexp(tboxid1,tboxid2,dict) { //向两个html对象获取值,然后使用指定的数组做计算,最后将结果返回//通用方法
            var level1 = document.getElementById(tboxid1).value;
            var level2 = document.getElementById(tboxid2).value;
            if ( Number(level1) > 0 && Number(level2) > 0) {
                var exp_needed = Math.abs(dict[level1 - 1] - dict[level2 - 1]);
                return exp_needed;
            };
        };
        function calrounds(exp_needed,exp){ //计算海域总场次
            var rounds = Math.ceil(exp_needed / exp);
            return rounds;
        };
        function calmuons(rounds,muon) { //计算电力总消耗
            var muons = rounds * muon;
            return muons;
        };
        function calcommander(level,outputlabel) {
            //计算NEO上限
            var neo = Number(500) + Number(50 * level);
            //计算Muon上限
            var muon = Number(375) + Number(20 * level);
            //计算Cost上限
            var cost = 0;
            if ( level <= 100) {
                cost = Dict_Commander_Cost[level -1];
            }else{
                cost = Dict_Commander_Cost[Dict_Commander_Cost.length - 1];
            };
            document.getElementById(outputlabel).innerText = "NEO上限:" + neo + '\t\t' + "Muon上限:" + muon + '\t\t' + "Cost上限:" + cost;
        };
      //function test(){
      //    var c = 15000; //剩余经验
      //    var a = 400; //训练海域
      //    var b = 187; //普通海域
      //    var x = Math.floor(c / a);
      //    var y = Math.ceil(( c - a * x ) / b);
      //    var str = "训练海域" + '\t' + "普通海域" + '\t' + '总场次' + '\t\t' + "经验溢出值" + '\n';
      //    for ( var i=x;i>=0;i--) {
      //        if ( i <= 30 ) {
      //            var j = Math.ceil(( c - a * i ) / b);
      //            var waste = a * i + b * j - c; 
      //            str = str + i + '\t\t' + j + '\t\t' + Number(i+j) + '\t\t' + waste + '\n';
      //        }
      //    }
      //    //document.getElementById("RTBox_result").value = str;
      //}
    
    </script>
</body>
</html>